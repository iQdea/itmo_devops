# Требования к разрабатываемому образу NGINX

## Docker: Запуск nginx

Цель лабораторной: запустить в докере рабочий веб-сервер nginx

1. Образ должен быть легковесным
    
    ==> Сборка проводится в два этапа, с копированием только необходимых файлов в scratch-based образ

2. Образ должен быть на базе scratch

    ```Dockerfile
    FROM ... AS build
    # <build image>

    FROM scratch  # во втором образе
    COPY --from=build ...
    ```

3. Должна быть возможность конфигурирования через файл

    ==> Конфигурация nginx через nginx.conf, добавляемый как volume

4. Создать файл docker-compose для старта и сборки

    ==> docker-compose.yml  

5. Статика должна быть внешним томом volume

    ==> В docker-compose делаем volume mount на локальную папку static

6. В docker-compose должен быть сайдкар для ~~lets encrypt~~ **генерации самоподписанного сертификата с openssl**

    Примечание: было разрешено генерировать самоподписанные сертификаты при помощи openssl

    Сертификаты передаются между сайдкаром и nginx как volume

    Openssl генерирует сертификаты раз в сутки