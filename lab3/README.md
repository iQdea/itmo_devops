# Требования к разрабатываемому образу приложения

## Docker: докеризация приложения

Цель лабораторной: собрать из исходного когда и запустить в докере рабочее приложение (любое опенсорс - java, python/django/flask).

Был выбран язык Java и Gradle для сборки

1. Образ должен быть легковесным

    ==> Сборка в два этапа. Для обеспечения легковесности образа было принято решение создать урезанную версию Java среды выполнения (JRE) с помощью jlink и добавления информации по модулям приложения в его корень.

2. Вся конфигурация выполняется через переменные окружения

    ==> .env
    ==> Приложение основано на Spring Boot, поэтому позволяет конфигурироваться через перемнные окружения

3. Статика должна быть внешним томом `volume`

    ==> В docker-compose делаем volume mount на локальную папку static (кроме тех, что внутри приложения - там по Spring MVC).

4. Создать файл `docker-compose` для старта и сборки

    ==> docker-compose.yaml

5. В `docker-compose` должна быть база данных

    ==> Сервис postgres на базе postgres:14-alpine с данными, хранящимися в volume pg_data

6. При старте приложения должно быть учтено выполнение миграций

    ==> Сервис migrate на базе flyway c файлами миграции в volume

7. При старте приложения должно быть учтено создание супер-пользователя (если возможно)

    ==> Создается по умолчанию в postgres:14-alpine (root). При необходимости можно заложить в скрипт для сервиса postgres, при запуске приложения в текущей версии не создается.
